<!DOCTYPE html>
<html>

<head>
    <title>My Form Example</title>
    <link rel="stylesheet" href="/css/form.css">
</head>

<body>
    <h1>Fill out this form if you know what's good for you!</h1>
    <form name="myForm" id="myForm">
        <label>Name:</label><input name='name'>
        <label>Age:</label><input name="age">
        <div>
            <label>Favorite Color</label>
            <input type="radio" name="favColor" value="blue"><label>Blue</lable>
                <input type="radio" name="favColor" value="red"><label>Red</label>
                <input type="radio" name="favColor" value="green"><label>Green</label>
        </div>
        <div>
            <input type="checkbox" name="read"><label>I have read the instructions</label>
        </div>
        <div>
            <p>Who is the ACTUAL worst?</p>
            <select name="worst">
                <option value="Cailou">Cailou</option>
                <option value="politicians">ANY politician</option>
                <option value="salespeople">Sales People</option>
            </select>
        </div>
        <div>
            <input type="submit" value="Submit">
        </div>
    </form>

    <script type="text/javascript">
        // How in the world do we get the form to do stuff?
        const myForm = document.getElementById('myForm');

        myForm.addEventListener('submit', (event) => {
            event.preventDefault();
            const formData = new FormData(event.target);
            const data = {};
            for (const pair of formData.entries()) {
                data[pair[0]] = pair[1];
            }
            console.log('data ends up as: ', data);



            const url = `./form`;

            const options = {
                method: 'POST',
                body: data
            };

            var request = new XMLHttpRequest();
            request.open("POST", "./form");
            request.send(data);
            return;


            fetch(url, options)
                .then((response) => {
                    return response.json();
                })
                .then((data) => {
                    console.log('data: ', data);
                }, (err) => {
                    console.error('Fetch did not work: ', err);
                });

        });

    </script>
</body>

</html>